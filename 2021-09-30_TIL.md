# ğŸ“‘Today I Learn (2021.09.30)
## Django
```
SetPasswordForm 
strip=False ê³µë°±




import re
re.findall(r'#[a-zA-Z\dã„±-í£]+',post.caption)
['#ì¥ê³ ', '#django', '#gilbert']
re.findall(r'#([a-zA-Z\dã„±-í£]+)',post.caption) 
['ì¥ê³ ', 'django', 'gilbert']
```

```
1. íšŒì› ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ êµ¬í˜„

    PasswordChangeForm, PasswordChangeView í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ë²ˆí˜¸

    ë³€ê²½ì„ êµ¬í˜„í•´ë´¤ë‹¤. LoginRequiredMixinì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ 

    ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì œí•œì„ ê±¸ì–´ë‘ì—ˆë‹¤.



2. super().form_valid(form)

    ìš°ì„  super()ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì œë„¤ë¦­ viewì˜ methodë¥¼ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

    ì¦‰, ë¶€ëª¨classì˜ form_valid( ) ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ëœ»ì´ë‹¤. form_valid( )ëŠ”

    ìœ íš¨í•œ í¼ ë°ì´í„°ë¡œ ì²˜ë¦¬í•  ë¡œì§ìœ¼ë¡œ ë°˜ë“œì‹œ super() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•¨.



3. ManyToMany Field

    tag_set = models.ManyToManyField('Tag', blank=True)

    tag_setì€ ë‹¤ëŒ€ë‹¤ í•„ë“œì´ê¸° ë•Œë¬¸ì— add()ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

    ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ postë¥¼ DBì— ì €ì¥í•˜ê³  ë‚˜ì„œ add()ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.

    PKê°’ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
```

<br>


<br>

## ğŸ” í•¨ìˆ˜í˜• / í´ë˜ìŠ¤í˜• View
```python
@login_required
def post_edit(request, pk):
    post = get_object_or_404(Post,pk=pk)
    
    if post.author != request.user:
        messages.error(request, 'ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
        return redirect(post)
    
    if request.method == 'POST':
        form = PostForm(request.POST, request.FILES, instance=post)
        if form.is_valid():
            post = form.save(commit=True)
            messages.success(request, 'í¬ìŠ¤íŒ…ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ')
            #get_absoulute_urlì´ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‹ˆ post_detailë¡œ ì´ë™í•œë‹¤.
            return redirect(post)   
    else:
        form = PostForm(instance=post)
    
    return render(request, 'instagram/post_form.html',{
        'form':form,
        'post':post,
        })
```
```python
from django.http import HttpResponse

def my_view(request):  
    if request.method == 'GET':
        """
        ë·° ë¡œì§ ì‘ì„±
        """
        return HttpResponse('result')
```
í•¨ìˆ˜í˜• ë·°ì—ì„œëŠ” ì˜ˆì œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ HTTP ë©”ì†Œë“œë³„ ë‹¤ë¥¸ ì²˜ë¦¬ê°€ í•„ìš”í•  ë•Œ 

if ë¬¸ì„ ì´ìš©í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ, í´ë˜ìŠ¤í˜• ë·°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œì˜ êµ¬ì¡°ê°€ 

í›¨ì”¬ ê¹”ë”í•´ì§ì„ ë³¼ ìˆ˜ ìˆë‹¤.

```python
from django.http import HttpResponse  
from django.views.generic import View

class MyView(View):
    # GETë°©ì‹  
    def get(self, request):
        """
        ë·° ë¡œì§ ì‘ì„±
        """
        return HttpResponse('result')
```
í´ë˜ìŠ¤í˜• ë·°ì—ì„œëŠ” HTTP ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ í´ë˜ìŠ¤ ë‚´ì˜ ë©”ì†Œë“œë¥¼ ì •ì˜í•˜ë©´ ëœë‹¤.

(ë‹¨, ë©”ì†Œë“œëª…ì€ ì†Œë¬¸ìë¡œ) ì´ëŸ¬í•œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ ê²ƒì€ ë‚´ë¶€ì ìœ¼ë¡œ dispatch() 

ë©”ì†Œë“œê°€ ì–´ë–¤ HTTP ë©”ì†Œë“œë¡œ ìš”ì²­ë˜ì—ˆëŠ”ì§€ ì•Œì•„ë‚´ê³ , ì´ë¥¼ ì²˜ë¦¬í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

<br>

<br>

## ğŸ’¡ í´ë˜ìŠ¤ í˜• ë·°ì—ì„œì˜ í¼ ì²˜ë¦¬
```python
from django.http import HttpResponseRedirect  
from django.shortcuts import render  
from django.views.generic import View

from .forms imports MyForm

class MyFormView(View):             # generic Viewìƒì†
    form_class = MyForm
    initial = {'key': 'value'}
    template_name = 'form_template.html'

    def get(self, request, *args, **kwargs):
        form = self.form_class(initial=self.initial)
        return render(request, self.template_name, {'form': form}

    def post(self, request, *args, **kwargs):
        form = self.form_class(request.POST)
        if form.is_valid():
            # cleaned_dataë¡œ ê´€ë ¨ ë¡œì§ ì²˜ë¦¬
            return HttpResponseRedirect('/success/')  # return redirect('#')      
        return render(request, self.template_name, {'form':form})
```
í´ë˜ìŠ¤í˜• ë·°ì—ì„œì˜ í¼ì²˜ë¦¬ëŠ” get, post ë°©ì‹ì„ ë©”ì†Œë“œë¡œ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨, ì½”ë“œ êµ¬ì¡°ê°€ ê¹”ë”í•´ì§„ë‹¤.


ì´ ì½”ë“œë¥¼ ìœ„ì—ì„œ ë´¤ì—ˆë˜ ì œë„¤ë¦­ ë·°ì¸ FormView ë¥¼ ìƒì†ë°›ì•„ ì²˜ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë” ê°„ê²°í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
```python
from django.views.generic.edit import UpdateView
from django.contrib.auth.mixins import LoginRequiredMixin
from .models import Post

class PostUpdateView(LoginRequiredMixin, UpdateView):
    model = Post
    form_class = PostForm

    def form_valid(self,form):
        return super().form_valid(form)

post_edit = PostUpdateView.as_view()
```
get, post ë©”ì†Œë“œê°€ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì—¬ê¸°ì—ì„œëŠ” ì•„ë˜ í•­ëª©ë“¤ë§Œ ìœ ì˜í•´ì„œ ì§€ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

- form_class: ì‚¬ìš©ìì— ë³´ì—¬ì¤„ í¼ì„ ì •ì˜í•œ forms.py íŒŒì¼ ë‚´ì˜ í´ë˜ìŠ¤ëª…

- template_name: í¼ì„ í¬í•¨í•˜ì—¬ ë Œë”ë§í•  í…œí”Œë¦¿ íŒŒì¼ ì´ë¦„

- success_url: MyFormView ì²˜ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆì„ ë•Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë  URL

- form_valid() í•¨ìˆ˜: ìœ íš¨í•œ í¼ ë°ì´í„°ë¡œ ì²˜ë¦¬í•  ë¡œì§ ì½”ë”©. ë°˜ë“œì‹œ super() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ 

<br>

<br>

<br>


## ğŸ“ŒSummary
í•¨ìˆ˜í˜• viewëŠ” Http ìš”ì²­ ë°©ì‹ì„ ifë¬¸ì„ í†µí•´ì„œ êµ¬í˜„í•´ì£¼ì–´ì—¬í•œë‹¤. 

ì´ ê²½ìš°ì— formì²˜ë¦¬ëŠ”  **`return render(request,'#', {'form':form})`** ë¡œ í•œë‹¤.

ë°˜ë©´ì— classí˜• viewëŠ” 'ìƒì†'ì´ë¼ëŠ” íŠ¹ì„±ì„ í†µí•´, ë‹¤ì–‘í•œ generic viewë¥¼ ìƒì†ë°›ê³  

Http ìš”ì²­ ë°©ì‹ì´ ë‚´ë¶€ ë©”ì†Œë“œë¡œ êµ¬í˜„ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì¬ì‚¬ìš©ê°€ëŠ¥í•˜ê³  , ê¹”ë”í•˜ê²Œ ì½”ë“œë¥¼

ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ ê²½ìš° form ì²˜ë¦¬ëŠ” **`def form_valid(self,form)`** ìœ¼ë¡œ í•´ì¤€ë‹¤.